{% extends "layout.html" %}

{% block title %}Transport Detail{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row g-4">
    <div class="col-lg-7">
      {% set vehicle_src = transport.vehicle_image_url if transport.vehicle_image_url and (transport.vehicle_image_url.startswith('http://') or transport.vehicle_image_url.startswith('https://')) else url_for('static', filename='uploads/' + (transport.vehicle_image_url or 'demo.jpg')) %}
      <img src="{{ vehicle_src }}"
           class="w-100 rounded shadow-sm mb-3"
           style="height:340px; object-fit:cover;"
           alt="{{ transport.transport_type or 'Transport' }}"
           onerror="this.onerror=null;this.src='{{ url_for('static', filename='uploads/demo.jpg') }}';">
      <h2 class="fw-bold mb-1">{{ transport.service_name }}</h2>
      <div class="text-muted mb-3">
        {{ transport.transport_type or 'Transport' }}
        {% if transport.vehicle_model %} | {{ transport.vehicle_model }}{% endif %}
      </div>

      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <p class="mb-2"><strong>Location:</strong> {{ transport.city_name or 'N/A' }}, {{ transport.state_name or 'N/A' }}</p>
          <p class="mb-2"><strong>Registration No:</strong> {{ transport.registration_number or 'N/A' }}</p>
          <p class="mb-2"><strong>Seating Capacity:</strong> {{ transport.seating_capacity or 'N/A' }}</p>
          <p class="mb-2"><strong>Available Vehicles:</strong> {{ transport.available_units or 0 }} / {{ transport.total_units or 0 }}</p>
          <p class="mb-2"><strong>Driver Available:</strong> {{ 'Yes' if transport.driver_available else 'No' }}</p>
          <p class="mb-0"><strong>AC Available:</strong> {{ 'Yes' if transport.ac_available else 'No' }}</p>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="fw-semibold mb-2">Description</h5>
          <p class="mb-0 text-muted">{{ transport.description or 'No description provided.' }}</p>
        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="fw-semibold mb-3">Fixed Tour Only</h5>
          <p class="mb-2"><strong>Price Per Day:</strong> Rs {{ transport.price_per_day or transport.price or 0 }}</p>
          <p class="mb-3 text-muted">
            This transport is available only through organizer-published fixed tours.
            Direct transport booking is not allowed.
          </p>
          <a class="btn btn-primary w-100" href="{{ url_for('tour') }}">View Fixed Tours</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
